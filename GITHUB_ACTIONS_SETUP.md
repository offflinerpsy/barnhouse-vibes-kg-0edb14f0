# üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è —á–µ—Ä–µ–∑ GitHub Actions

> –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ production –ø—Ä–∏ –∫–∞–∂–¥–æ–º push –≤ main

---

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –¢—ã –¥–µ–ª–∞–µ—à—å `git push origin main`
2. GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`npm ci`)
   - –°–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç (`npm run build`)
   - –î–µ–ø–ª–æ–∏—Ç —á–µ—Ä–µ–∑ rsync –Ω–∞ —Å–µ—Ä–≤–µ—Ä
   - –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

**= –ë–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –¥–µ–ø–ª–æ–∏—Ç—å!** üéâ

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (–æ–¥–∏–Ω —Ä–∞–∑)

### 1. –ü–æ–ª—É—á–∏—Ç—å SSH –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á

**–ù–∞ Windows:**
```powershell
# –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á
Get-Content "$env:USERPROFILE\.ssh\id_rsa"
```

**–ù–∞ Mac:**
```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á
cat ~/.ssh/id_rsa
```

–°–∫–æ–ø–∏—Ä—É–π **–≤–µ—Å—å** –≤—ã–≤–æ–¥ (–≤–∫–ª—é—á–∞—è `-----BEGIN ... -----END`)

---

### 2. –î–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á –≤ GitHub Secrets

1. –û—Ç–∫—Ä–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: https://github.com/offflinerpsy/barnhouse-vibes-kg-0edb14f0
2. –ü–µ—Ä–µ–π–¥–∏ –≤ **Settings** ‚Üí **Secrets and variables** ‚Üí **Actions**
3. –ù–∞–∂–º–∏ **New repository secret**
4. **Name:** `SSH_PRIVATE_KEY`
5. **Value:** –≤—Å—Ç–∞–≤—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á
6. **Add secret**

---

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –°–¥–µ–ª–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–º–º–∏—Ç
git add .
git commit -m "test: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è"
git push origin main

# –ó–∞–π—Ç–∏ –≤ GitHub ‚Üí Actions ‚Üí –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
```

–ß–µ—Ä–µ–∑ ~2-3 –º–∏–Ω—É—Ç—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—è–≤—è—Ç—Å—è –Ω–∞ https://era-home.kg üöÄ

---

## üìä –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –¥–µ–ø–ª–æ—è

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
1. –û—Ç–∫—Ä–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub
2. –í–∫–ª–∞–¥–∫–∞ **Actions**
3. –í—ã–±–µ—Ä–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π workflow
4. –ü–æ—Å–º–æ—Ç—Ä–∏ —Å—Ç–∞—Ç—É—Å –∏ –ª–æ–≥–∏ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞

### –°—Ç–∞—Ç—É—Å—ã
- üü¢ **Success** ‚Äî –¥–µ–ø–ª–æ–π –ø—Ä–æ—à—ë–ª —É—Å–ø–µ—à–Ω–æ
- üî¥ **Failure** ‚Äî –æ—à–∏–±–∫–∞ (—Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏)
- üü° **In progress** ‚Äî –¥–µ–ø–ª–æ–π –∏–¥—ë—Ç

---

## üîß –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

–ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–ø–ª–æ–π –≤—Ä—É—á–Ω—É—é –±–µ–∑ –∫–æ–º–º–∏—Ç–∞:

1. GitHub ‚Üí **Actions**
2. **Deploy to Production** workflow
3. **Run workflow** ‚Üí –≤—ã–±–µ—Ä–∏ –≤–µ—Ç–∫—É `main`
4. **Run workflow**

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

### Workflow –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏:
- ‚úÖ `git push origin main`
- ‚úÖ Merge PR –≤ main
- ‚úÖ –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ UI

### –ù–ï –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏:
- ‚ùå Push –≤ –¥—Ä—É–≥–∏–µ –≤–µ—Ç–∫–∏ (fix/*, feature/*)
- ‚ùå –ö–æ–º–º–∏—Ç —Ç–æ–ª—å–∫–æ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é (–Ω–æ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å)

---

## üõë –û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –≤—ã–∫–ª—é—á–∏—Ç—å:

1. –ü–µ—Ä–µ–∏–º–µ–Ω—É–π —Ñ–∞–π–ª:
```bash
git mv .github/workflows/deploy.yml .github/workflows/deploy.yml.disabled
git commit -m "chore: –æ—Ç–∫–ª—é—á—ë–Ω –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π"
git push origin main
```

2. –í–∫–ª—é—á–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ:
```bash
git mv .github/workflows/deploy.yml.disabled .github/workflows/deploy.yml
git commit -m "chore: –≤–∫–ª—é—á—ë–Ω –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π"
git push origin main
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ SSH –∫–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ **GitHub Secrets** (–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω)
- ‚úÖ –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ—è–≤–∏—Ç—Å—è –≤ –ª–æ–≥–∞—Ö
- ‚úÖ –î–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ —ç—Ç–æ–º—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é
- ‚ö†Ô∏è **–ù–ï –∫–æ–º–º–∏—Ç—å** –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –≤ –∫–æ–¥!

---

## üìù –¢–µ–ø–µ—Ä—å workflow —Ç–∞–∫–æ–π:

**–°—Ç–∞—Ä—ã–π:**
```
–ë–ê–ì ‚Üí ISSUE ‚Üí FIX ‚Üí BUILD ‚Üí COMMIT ‚Üí DEPLOY –≤—Ä—É—á–Ω—É—é ‚Üí CLOSE ISSUE
```

**–ù–æ–≤—ã–π:**
```
–ë–ê–ì ‚Üí ISSUE ‚Üí FIX ‚Üí COMMIT ‚Üí PUSH ‚Üí –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π ‚ú® ‚Üí CLOSE ISSUE
```

**–ë–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ:**
- ‚ùå `npm run build` (–¥–µ–ª–∞–µ—Ç Actions)
- ‚ùå `rsync dist/ root@...` (–¥–µ–ª–∞–µ—Ç Actions)
- ‚ùå `ssh root@... chmod ...` (–¥–µ–ª–∞–µ—Ç Actions)

**–ü—Ä–æ—Å—Ç–æ:**
```bash
git add .
git commit -m "fix: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –±–∞–≥"
git push origin main
# –í—Å—ë! üéâ
```

---

## üÜò Troubleshooting

### –û—à–∏–±–∫–∞ "Host key verification failed"
Actions –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É –≤–ø–µ—Ä–≤—ã–µ.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–ø–µ—á–∞—Ç–æ–∫ —Å–µ—Ä–≤–µ—Ä–∞:
1. –õ–æ–∫–∞–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω–∏: `ssh-keyscan 185.196.117.49`
2. –î–æ–±–∞–≤—å –≤ workflow –ø–µ—Ä–µ–¥ rsync:
```yaml
- name: Add known hosts
  run: ssh-keyscan 185.196.117.49 >> ~/.ssh/known_hosts
```

### –û—à–∏–±–∫–∞ "Permission denied"
–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π SSH –∫–ª—é—á –≤ Secrets.

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª **–ü–†–ò–í–ê–¢–ù–´–ô** –∫–ª—é—á (`id_rsa`), –∞ –Ω–µ –ø—É–±–ª–∏—á–Ω—ã–π (`id_rsa.pub`)

### –î–µ–ø–ª–æ–π –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ workflow —Ñ–∞–π–ª –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –º–µ—Å—Ç–µ: `.github/workflows/deploy.yml`

---

*–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±–Ω–æ–≤–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ `.github/copilot-instructions.md`!*
